<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.wxcustomer.mapper.KhAfterSaleMemberMapper">
    
    <resultMap type="KhAfterSaleMember" id="KhAfterSaleMemberResult">
        <result property="id"    column="id"    />
        <result property="customerId"    column="customer_id"    />
        <result property="followResultType"    column="follow_result_type"    />
        <result property="dealAmount"    column="deal_amount"    />
        <result property="sendSampleList"    column="send_sample_list"    />
        <result property="giftsList"    column="gifts_list"    />
        <result property="dealTime"    column="deal_time"    />
        <result property="troubleSpots"    column="trouble_spots"    />
        <result property="intentionPoint"    column="intention_point"    />
        <result property="followTimes"    column="follow_times"    />
        <result property="followResult"    column="follow_result"    />
        <result property="durationHour"    column="duration_hour"    />
        <result property="durationMinute"    column="duration_minute"    />
        <result property="durationSecond"    column="duration_second"    />
        <result property="nextFollowTime"    column="next_follow_time"    />
        <result property="nextFollowMentality"    column="next_follow_mentality"    />
        <result property="creatorId"    column="creator_id"    />
        <result property="creator"    column="creator"    />
        <result property="sender"    column="sender"    />
        <result property="senderPhone"    column="sender_phone"    />
        <result property="senderAddress"    column="sender_address"    />
        <result property="sendTime"    column="send_time"    />
        <result property="courierNumber"    column="courier_number"    />
        <result property="logisticsCompany"    column="logistics_company"    />
        <result property="collectingAmount"    column="collecting_amount"    />
        <result property="insuranceAmount"    column="insurance_amount"    />
        <result property="postage"    column="postage"    />
        <result property="isDeal"    column="is_deal"    />
    </resultMap>

    <sql id="selectKhAfterSaleMemberVo">
        select id, customer_id, follow_result_type, deal_amount, send_sample_list, gifts_list, deal_time, trouble_spots, intention_point, follow_times, follow_result, duration_hour, duration_minute, duration_second, next_follow_time, next_follow_mentality, creator_id, creator, sender, sender_phone, sender_address, send_time, courier_number, logistics_company, collecting_amount, insurance_amount, postage, is_deal from kh_after_sale_member
    </sql>

    <select id="selectKhAfterSaleMemberList" parameterType="KhAfterSaleMember" resultMap="KhAfterSaleMemberResult">
        <include refid="selectKhAfterSaleMemberVo"/>
        <where>  
            <if test="followResultType != null  and followResultType != ''"> and follow_result_type = #{followResultType}</if>
            <if test="params.beginDealAmount != null and params.beginDealAmount != '' and params.endDealAmount != null and params.endDealAmount != ''"> and deal_amount between #{params.beginDealAmount} and #{params.endDealAmount}</if>
            <if test="params.beginDealTime != null and params.beginDealTime != '' and params.endDealTime != null and params.endDealTime != ''"> and deal_time between #{params.beginDealTime} and #{params.endDealTime}</if>
            <if test="creator != null  and creator != ''"> and creator = #{creator}</if>
            <if test="isDeal != null  and isDeal != ''"> and is_deal = #{isDeal}</if>
        </where>
    </select>
    
    <select id="selectKhAfterSaleMemberById" parameterType="String" resultMap="KhAfterSaleMemberResult">
        <include refid="selectKhAfterSaleMemberVo"/>
        where id = #{id}
    </select>
        
    <insert id="insertKhAfterSaleMember" parameterType="KhAfterSaleMember">
        insert into kh_after_sale_member
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null  and id != ''">id,</if>
            <if test="customerId != null  and customerId != ''">customer_id,</if>
            <if test="followResultType != null  and followResultType != ''">follow_result_type,</if>
            <if test="dealAmount != null ">deal_amount,</if>
            <if test="sendSampleList != null  and sendSampleList != ''">send_sample_list,</if>
            <if test="giftsList != null  and giftsList != ''">gifts_list,</if>
            <if test="dealTime != null ">deal_time,</if>
            <if test="troubleSpots != null  and troubleSpots != ''">trouble_spots,</if>
            <if test="intentionPoint != null  and intentionPoint != ''">intention_point,</if>
            <if test="followTimes != null ">follow_times,</if>
            <if test="followResult != null  and followResult != ''">follow_result,</if>
            <if test="durationHour != null ">duration_hour,</if>
            <if test="durationMinute != null ">duration_minute,</if>
            <if test="durationSecond != null ">duration_second,</if>
            <if test="nextFollowTime != null ">next_follow_time,</if>
            <if test="nextFollowMentality != null  and nextFollowMentality != ''">next_follow_mentality,</if>
            <if test="creatorId != null  and creatorId != ''">creator_id,</if>
            <if test="creator != null  and creator != ''">creator,</if>
            <if test="sender != null  and sender != ''">sender,</if>
            <if test="senderPhone != null  and senderPhone != ''">sender_phone,</if>
            <if test="senderAddress != null  and senderAddress != ''">sender_address,</if>
            <if test="sendTime != null ">send_time,</if>
            <if test="courierNumber != null  and courierNumber != ''">courier_number,</if>
            <if test="logisticsCompany != null  and logisticsCompany != ''">logistics_company,</if>
            <if test="collectingAmount != null ">collecting_amount,</if>
            <if test="insuranceAmount != null ">insurance_amount,</if>
            <if test="postage != null ">postage,</if>
            <if test="isDeal != null  and isDeal != ''">is_deal,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null  and id != ''">#{id},</if>
            <if test="customerId != null  and customerId != ''">#{customerId},</if>
            <if test="followResultType != null  and followResultType != ''">#{followResultType},</if>
            <if test="dealAmount != null ">#{dealAmount},</if>
            <if test="sendSampleList != null  and sendSampleList != ''">#{sendSampleList},</if>
            <if test="giftsList != null  and giftsList != ''">#{giftsList},</if>
            <if test="dealTime != null ">#{dealTime},</if>
            <if test="troubleSpots != null  and troubleSpots != ''">#{troubleSpots},</if>
            <if test="intentionPoint != null  and intentionPoint != ''">#{intentionPoint},</if>
            <if test="followTimes != null ">#{followTimes},</if>
            <if test="followResult != null  and followResult != ''">#{followResult},</if>
            <if test="durationHour != null ">#{durationHour},</if>
            <if test="durationMinute != null ">#{durationMinute},</if>
            <if test="durationSecond != null ">#{durationSecond},</if>
            <if test="nextFollowTime != null ">#{nextFollowTime},</if>
            <if test="nextFollowMentality != null  and nextFollowMentality != ''">#{nextFollowMentality},</if>
            <if test="creatorId != null  and creatorId != ''">#{creatorId},</if>
            <if test="creator != null  and creator != ''">#{creator},</if>
            <if test="sender != null  and sender != ''">#{sender},</if>
            <if test="senderPhone != null  and senderPhone != ''">#{senderPhone},</if>
            <if test="senderAddress != null  and senderAddress != ''">#{senderAddress},</if>
            <if test="sendTime != null ">#{sendTime},</if>
            <if test="courierNumber != null  and courierNumber != ''">#{courierNumber},</if>
            <if test="logisticsCompany != null  and logisticsCompany != ''">#{logisticsCompany},</if>
            <if test="collectingAmount != null ">#{collectingAmount},</if>
            <if test="insuranceAmount != null ">#{insuranceAmount},</if>
            <if test="postage != null ">#{postage},</if>
            <if test="isDeal != null  and isDeal != ''">#{isDeal},</if>
         </trim>
    </insert>

    <update id="updateKhAfterSaleMember" parameterType="KhAfterSaleMember">
        update kh_after_sale_member
        <trim prefix="SET" suffixOverrides=",">
            <if test="customerId != null  and customerId != ''">customer_id = #{customerId},</if>
            <if test="followResultType != null  and followResultType != ''">follow_result_type = #{followResultType},</if>
            <if test="dealAmount != null ">deal_amount = #{dealAmount},</if>
            <if test="sendSampleList != null  and sendSampleList != ''">send_sample_list = #{sendSampleList},</if>
            <if test="giftsList != null  and giftsList != ''">gifts_list = #{giftsList},</if>
            <if test="dealTime != null ">deal_time = #{dealTime},</if>
            <if test="troubleSpots != null  and troubleSpots != ''">trouble_spots = #{troubleSpots},</if>
            <if test="intentionPoint != null  and intentionPoint != ''">intention_point = #{intentionPoint},</if>
            <if test="followTimes != null ">follow_times = #{followTimes},</if>
            <if test="followResult != null  and followResult != ''">follow_result = #{followResult},</if>
            <if test="durationHour != null ">duration_hour = #{durationHour},</if>
            <if test="durationMinute != null ">duration_minute = #{durationMinute},</if>
            <if test="durationSecond != null ">duration_second = #{durationSecond},</if>
            <if test="nextFollowTime != null ">next_follow_time = #{nextFollowTime},</if>
            <if test="nextFollowMentality != null  and nextFollowMentality != ''">next_follow_mentality = #{nextFollowMentality},</if>
            <if test="creatorId != null  and creatorId != ''">creator_id = #{creatorId},</if>
            <if test="creator != null  and creator != ''">creator = #{creator},</if>
            <if test="sender != null  and sender != ''">sender = #{sender},</if>
            <if test="senderPhone != null  and senderPhone != ''">sender_phone = #{senderPhone},</if>
            <if test="senderAddress != null  and senderAddress != ''">sender_address = #{senderAddress},</if>
            <if test="sendTime != null ">send_time = #{sendTime},</if>
            <if test="courierNumber != null  and courierNumber != ''">courier_number = #{courierNumber},</if>
            <if test="logisticsCompany != null  and logisticsCompany != ''">logistics_company = #{logisticsCompany},</if>
            <if test="collectingAmount != null ">collecting_amount = #{collectingAmount},</if>
            <if test="insuranceAmount != null ">insurance_amount = #{insuranceAmount},</if>
            <if test="postage != null ">postage = #{postage},</if>
            <if test="isDeal != null  and isDeal != ''">is_deal = #{isDeal},</if>
        </trim>
        where id = #{id}
    </update>

    <delete id="deleteKhAfterSaleMemberById" parameterType="String">
        delete from kh_after_sale_member where id = #{id}
    </delete>

    <delete id="deleteKhAfterSaleMemberByIds" parameterType="String">
        delete from kh_after_sale_member where id in 
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
    
</mapper>